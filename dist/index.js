"use strict";var e=require("react");const t=e.createContext(null);function o({flow:o="implicit",scope:r="",onSuccess:n,onError:l,onNonOAuthError:c,overrideScope:i,state:u,...s}){const{clientId:a,scriptLoadedSuccessfully:d}=function(){const o=e.useContext(t);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}(),v=e.useRef(),f=e.useRef(n);f.current=n;const h=e.useRef(l);h.current=l;const p=e.useRef(c);p.current=c,e.useEffect((()=>{var e,t;if(!d)return;const n="implicit"===o?"initTokenClient":"initCodeClient",l=null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.oauth2[n]({client_id:a,scope:i?r:`openid profile email ${r}`,callback:e=>{var t,o;if(e.error)return null===(t=h.current)||void 0===t?void 0:t.call(h,e);null===(o=f.current)||void 0===o||o.call(f,e)},error_callback:e=>{var t;null===(t=p.current)||void 0===t||t.call(p,e)},state:u,...s});v.current=l}),[a,d,o,r,u]);const w=e.useCallback((e=>{var t;return null===(t=v.current)||void 0===t?void 0:t.requestAccessToken(e)}),[]),g=e.useCallback((()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.requestCode()}),[]);return"implicit"===o?w:g}var r;void 0===r&&(r={}),r.insertAt;exports.GoogleDrive=()=>{const[t,r]=e.useState(""),[n,l]=e.useState([]),c=o({onSuccess:e=>{console.log(e)},flow:"auth-code",scope:"https://www.googleapis.com/auth/drive"});e.useEffect((()=>{t&&i()}),[t]);const i=async()=>{try{const e=await fetch("https://www.googleapis.com/drive/v3/files",{headers:{Authorization:`Bearer ${t}`}}),o=await e.json();l(o.files)}catch(e){console.error("Error fetching files: ",e)}};return e.createElement(GoogleOAuthProvider,{clientId:"375499242890-r9i0i6cli22p4f5q0cv8dss48k4od2s1.apps.googleusercontent.com"},e.createElement("h2",null,"React Google Drive Integration"),e.createElement("button",{onClick:()=>c()},"Sign in with Google ğŸš€"),n.length>0&&e.createElement("div",null,e.createElement("h3",null,"Files:"),e.createElement("ul",null,n.map((t=>e.createElement("li",{key:t.id},t.name))))))};
